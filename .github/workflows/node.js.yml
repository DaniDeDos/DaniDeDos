name: Update README.md

on:
 push:
   branches:
     - main
 workflow_dispatch:
 
 schedule:
   - cron: "* * * * *"
   
jobs:
 build:
   runs-on: ubuntu-latest
   
   steps:
   - uses: actions/checkout@v3
     with:
       token: ${{ secrets.README_API_KEY }}
   - uses: actions/setup-node@v1
     with:
       node-version: '16'
   - run: npm install
   - run: npm run update-readme
     env:
        README_API_KEY: ${{ secrets.README_API_KEY }}
   - run: |
       git config user.name DaniDeDos
       git config user.email hasashih978@gmail.com
       git add README.md
       git diff --quiet && git diff --staged --quiet || git commit -m "[bot] Update README with latest info"
       git push origin main
